<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "com.ja.finalproject.board.mapper.BoardMapper">
    
    <insert id="createBoard">
        INSERT INTO fp_article (user_id, title, content) 
        VALUES(#{userid}, #{title}, #{content});
    </insert>

    <select id="selectAllBoards" resultType="com.ja.finalproject.dto.articleDto">
        SELECT  (b.id) AS id,
                (u.nickname) AS nickname,
                (b.user_id) AS userid,
                (b.title) AS title,
                (b.content) AS content,
                (b.read_count) AS readcount,
                DATE_FORMAT(b.created_at,'%Y-%m-%d') AS createdAtFormmat
        FROM    fp_article b
        INNER JOIN 	fp_user u ON u.id = b.user_id 
        ORDER BY id DESC
    </select>
   
    <select id="selectFindByNoContent" parameterType="int" resultType="com.ja.finalproject.dto.articleDto">
        SELECT  (b.id) AS id,
                (u.nickname) AS nickname,
                (b.user_id) AS userid,
                (b.title) AS title,
                (b.content) AS content,
                (b.read_count) AS readcount,
                DATE_FORMAT(b.created_at,'%Y-%m-%d') AS createdAtFormmat
        FROM    fp_article b
        INNER JOIN 	fp_user u ON u.id = b.user_id 
        WHERE   b.id = #{no}
    </select>

    <update id="addReadCount" parameterType="int">
        UPDATE fp_article SET read_count = read_count +1 WHERE id = #{no};
    </update>
</mapper>